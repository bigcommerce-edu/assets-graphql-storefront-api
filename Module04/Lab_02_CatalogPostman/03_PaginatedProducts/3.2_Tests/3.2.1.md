```
pm.test("Response is not an error", () => {
    pm.response.to.not.be.error;
    pm.response.to.not.have.jsonBody("errors");
});
pm.test("Response is JSON with data", () => {
    pm.response.to.have.jsonBody("data");
});

const products = pm.response.json().data?.site?.products?.edges ?? [];
pm.test("Response includes at least one product", () => {
    pm.expect(products.length).to.be.above(0);
});

const firstValidProduct = products.map(product => product.node)
    .find(product => {
        if (product.availabilityV2?.status !== "Available"
            || product.type !== "Physical"
            || product.inventory?.isInStock !== true) {
                return false;
            }

        const variants = product.variants?.edges ?? [];
        const firstValidVariant = variants.map(variant => variant.node)
            .find(variant => {
                return variant.inventory?.isInStock;
            });

        if (!firstValidVariant) {
            return false;
        }

        return product;
    });

pm.test("Found a saleable physical product with a variant", () => {
    pm.expect(firstValidProduct?.entityId).to.be.a("number");
});
```